!function(_){function g(n){Object.defineProperty(this,n,{enumerable:!0,get:function(){return this[t][n]}})}function h(n){if("undefined"!=typeof System&&System.isModule?System.isModule(n):"[object Module]"===Object.prototype.toString.call(n))return n;var a={default:n,__useDefault:n};if(n&&n.__esModule)for(var t in n)Object.hasOwnProperty.call(n,t)&&(a[t]=n[t]);return new E(a)}function E(n){Object.defineProperty(this,t,{value:n}),Object.keys(n).forEach(g,this)}function b(t){return"@node/"===t.substr(0,6)?u(t,h(p(t.substr(6))),{}):a[t]}function r(a){var e=b(a);if(!e)throw new Error("Module \""+a+"\" expected, but not contained in build.");if(e.module)return e.module;var o=e.linkRecord;return n(e,o),s(e,o,[]),e.module}function n(a,e){if(!e.depLoads){e.declare&&i(a,e),e.depLoads=[];for(var t,o=0;o<e.deps.length;o++){t=b(e.deps[o]),e.depLoads.push(t),t.linkRecord&&n(t,t.linkRecord);var r=e.setters&&e.setters[o];r&&(r(t.module||t.linkRecord.moduleObj),t.importerSetters.push(r))}return a}}function i(e,t){var a=t.moduleObj,r=e.importerSetters,n=!1,o=t.declare.call(_,function(o,d){if(!n){if("object"==typeof o)for(var t in o)"__useDefault"!==t&&(a[t]=o[t]);else a[o]=d;n=!0;for(var l=0;l<r.length;l++)r[l](a);return n=!1,d}},{id:e.key});"function"==typeof o?(t.setters=[],t.execute=o):(t.setters=o.setters,t.execute=o.execute)}function o(n,o,i){return a[n]={key:n,module:void 0,importerSetters:[],linkRecord:{deps:o,depLoads:void 0,declare:i,setters:void 0,execute:void 0,moduleObj:{}}}}function d(i,d,l,s){var c={};return a[i]={key:i,module:void 0,importerSetters:[],linkRecord:{deps:d,depLoads:void 0,declare:void 0,execute:s,executingRequire:l,moduleObj:{default:c,__useDefault:c},setters:void 0}}}function e(a,e,t){return function(r){for(var o=0;o<a.length;o++)if(a[o]===r){var n,l=e[o],i=l.linkRecord;return n=i?-1===t.indexOf(l)?s(l,i,t):i.moduleObj:l.module,"__useDefault"in n?n.__useDefault:n}}}function s(a,t,r){if(r.push(a),a.module)return a.module;var n;if(t.setters){for(var o=0;o<t.deps.length;o++){var i=t.depLoads[o],d=i.linkRecord;d&&-1===r.indexOf(i)&&(n=s(i,d,d.setters?r:[]))}t.execute.call(v)}else{var l={id:a.key},u=t.moduleObj;Object.defineProperty(l,"exports",{configurable:!0,set:function(t){u.default=u.__useDefault=t},get:function(){return u.__useDefault}});var c=e(t.deps,t.depLoads,r);if(!t.executingRequire)for(var o=0;o<t.deps.length;o++)c(t.deps[o]);var p=t.execute.call(_,c,u.__useDefault,l);void 0===p?l.exports!==u.__useDefault&&(u.default=u.__useDefault=l.exports):u.default=u.__useDefault=p;var g=u.__useDefault;if(g&&g.__esModule)for(var m in g)Object.hasOwnProperty.call(g,m)&&(u[m]=g[m])}var l=a.module=new E(t.moduleObj);if(!t.setters)for(var o=0;o<a.importerSetters.length;o++)a.importerSetters[o](l);return l}function u(n,r){return a[n]={key:n,module:r,importerSetters:[],linkRecord:void 0}}var a={},t="undefined"==typeof Symbol?"@@baseObject":Symbol();E.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(E.prototype[Symbol.toStringTag]="Module");var p="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&"undefined"!=typeof require.resolve&&"undefined"!=typeof process&&process.platform&&require,v={};return Object.freeze&&Object.freeze(v),function(s,e,t,n){return function(i){i(function(){u("@empty",new E({}));for(var i=0;i<e.length;i++)u(e[i],h(arguments[i],{}));n({_nodeRequire:p,register:o,registerDynamic:d,registry:{get:function(t){return a[t].module},set:u},newModule:function(t){return new E(t)}});var _=r(s[0]);if(1<s.length)for(var i=1;i<s.length;i++)r(s[i]);return t?_.__useDefault:(_ instanceof E&&Object.defineProperty(_,"__esModule",{value:!0}),_)})}}}("undefined"==typeof self?"undefined"==typeof global?this:global:self)(["a"],[],!1,function(d){var e=this.require,t=this.exports,n=this.module;!function(p){function e(t,e){for(var a=t.split(".");a.length;)e=e[a.shift()];return e}function u(a){if("string"==typeof a)return e(a,p);if(!(a instanceof Array))throw new Error("Global exports must be a string or array.");for(var r={},t=0;t<a.length;t++)r[a[t].split(".").pop()]=e(a[t],p);return r}function n(e){if(-1===o.indexOf(e)){try{var t=p[e]}catch(t){o.push(e)}this(e,t)}}var t,r=d,o=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB","mozInnerScreenY","mozInnerScreenX"];r.registry.set("@@global-helpers",r.newModule({prepareGlobal:function(e,o,r){var d=p.define;p.define=void 0;var m;if(r)for(var a in m={},r)m[a]=p[a],p[a]=r[a];return o||(t={},Object.keys(p).forEach(n,function(n,e){t[n]=e})),function(){var s,r=o?u(o):{},a=!!o;if(o||Object.keys(p).forEach(n,function(i,e){t[i]!==e&&void 0!==e&&(o||(r[i]=e,void 0==s?s=e:a||s===e||(a=!0)))}),r=a?r:s,m)for(var e in m)p[e]=m[e];return p.define=d,r}}}))}("undefined"==typeof self?global:self),d.registerDynamic("b",[],!1,function(e,t,n){var a=d.registry.get("@@global-helpers").prepareGlobal(n.id,null,null);return function(){(function(){"use strict";function o(e){var t=h.has(e);return e=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(e),!t&&e}function i(e){var t=e.isConnected;if(void 0!==t)return t;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return e&&(e.__CE_isImportDocument||e instanceof Document)}function n(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function l(t,r,a){a=a?a:new Set;for(var o=t;o;){if(o.nodeType===Node.ELEMENT_NODE){var i=o;r(i);var e=i.localName;if("link"===e&&"import"===i.getAttribute("rel")){if(o=i.import,o instanceof Node&&!a.has(o))for(a.add(o),o=o.firstChild;o;o=o.nextSibling)l(o,r,a);o=n(t,i);continue}else if("template"===e){o=n(t,i);continue}if(i=i.__CE_shadowRoot)for(i=i.firstChild;i;i=i.nextSibling)l(i,r,a)}o=o.firstChild?o.firstChild:n(t,o)}}function e(e,t,n){e[t]=n}function t(){this.a=new Map,this.o=new Map,this.f=[],this.b=!1}function s(e,t,n){e.a.set(t,n),e.o.set(n.constructor,n)}function r(e,t){e.b=!0,e.f.push(t)}function p(e,t){e.b&&l(t,function(t){return u(e,t)})}function u(e,t){if(e.b&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.f.length;n++)e.f[n](t)}}function m(e,t){var n=[];for(l(t,function(e){return n.push(e)}),t=0;t<n.length;t++){var a=n[t];1===a.__CE_state?e.connectedCallback(a):y(e,a)}}function _(e,t){var n=[];for(l(t,function(e){return n.push(e)}),t=0;t<n.length;t++){var a=n[t];1===a.__CE_state&&e.disconnectedCallback(a)}}function g(t,n,a){a=a?a:{};var r=a.w||new Set,o=a.s||function(e){return y(t,e)},i=[];if(l(n,function(n){if("link"===n.localName&&"import"===n.getAttribute("rel")){var a=n.import;a instanceof Node&&"complete"===a.readyState?(a.__CE_isImportDocument=!0,a.__CE_hasRegistry=!0):n.addEventListener("load",function(){var a=n.import;if(!a.__CE_documentLoadHandled){a.__CE_documentLoadHandled=!0,a.__CE_isImportDocument=!0,a.__CE_hasRegistry=!0;var i=new Set(r);i.delete(a),g(t,a,{w:i,s:o})}})}else i.push(n)},r),t.b)for(n=0;n<i.length;n++)u(t,i[n]);for(n=0;n<i.length;n++)o(i[n])}function y(t,n){if(void 0===n.__CE_state){var a=t.a.get(n.localName);if(a){a.constructionStack.push(n);var r=a.constructor;try{try{if(new r!==n)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{a.constructionStack.pop()}}catch(e){throw n.__CE_state=2,e}if(n.__CE_state=1,n.__CE_definition=a,a.attributeChangedCallback)for(a=a.observedAttributes,r=0;r<a.length;r++){var o=a[r],e=n.getAttribute(o);null!==e&&t.attributeChangedCallback(n,o,null,e,null)}i(n)&&t.connectedCallback(n)}}}function a(e,t){this.c=e,this.a=t,this.b=void 0,g(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function f(e){e.b&&e.b.disconnect()}function d(){var e=this;this.b=this.a=void 0,this.f=new Promise(function(t){e.b=t,e.a&&t(e.a)})}function E(e){if(e.a)throw Error("Already resolved.");e.a=void 0,e.b&&e.b(void 0)}function c(e){this.i=!1,this.c=e,this.m=new Map,this.j=function(e){return e()},this.g=!1,this.l=[],this.u=new a(e,document)}function b(t){if(!1!==t.g){t.g=!1;for(var n=t.l,o=[],i=new Map,a=0;a<n.length;a++)i.set(n[a].localName,[]);for(g(t.c,document,{s:function(n){if(void 0===n.__CE_state){var a=n.localName,e=i.get(a);e?e.push(n):t.c.a.get(a)&&o.push(n)}}}),a=0;a<o.length;a++)y(t.c,o[a]);for(;0<n.length;){for(var e=n.shift(),a=e.localName,e=i.get(e.localName),d=0;d<e.length;d++)y(t.c,e[d]);(a=t.m.get(a))&&E(a)}}}function v(){var t=le;window.HTMLElement=function(){function e(){var n=this.constructor,r=t.o.get(n);if(!r)throw Error("The custom element being constructed was not registered with `customElements`.");var o=r.constructionStack;if(!o.length)return o=B.call(document,r.localName),Object.setPrototypeOf(o,n.prototype),o.__CE_state=1,o.__CE_definition=r,u(t,o),o;var r=o.length-1,e=o[r];if(e===A)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return o[r]=A,Object.setPrototypeOf(e,n.prototype),u(t,e),e}return e.prototype=oe.prototype,e}()}function x(t,e,n){function a(n){return function(){for(var a=[],e=0;e<arguments.length;++e)a[e-0]=arguments[e];for(var r,e=[],o=[],d=0;d<a.length;d++)if(r=a[d],r instanceof Element&&i(r)&&o.push(r),r instanceof DocumentFragment)for(r=r.firstChild;r;r=r.nextSibling)e.push(r);else e.push(r);for(n.apply(this,a),a=0;a<o.length;a++)_(t,o[a]);if(i(this))for(a=0;a<e.length;a++)o=e[a],o instanceof Element&&m(t,o)}}n.h&&(e.prepend=a(n.h)),n.append&&(e.append=a(n.append))}function C(){var t=le;e(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.a.get(e);if(n)return new n.constructor}return e=B.call(this,e),u(t,e),e}),e(Document.prototype,"importNode",function(e,n){return e=F.call(this,e,n),this.__CE_hasRegistry?g(t,e):p(t,e),e}),e(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var a=t.a.get(n);if(a)return new a.constructor}return e=z.call(this,e,n),u(t,e),e}),x(t,Document.prototype,{h:j,append:Y})}function D(){function t(e,t){Object.defineProperty(e,"textContent",{enumerable:t.enumerable,configurable:!0,get:t.get,set:function(r){if(this.nodeType===Node.TEXT_NODE)t.set.call(this,r);else{var a;if(this.firstChild){var e=this.childNodes,o=e.length;if(0<o&&i(this))for(var a=Array(o),d=0;d<o;d++)a[d]=e[d]}if(t.set.call(this,r),a)for(r=0;r<a.length;r++)_(n,a[r])}}})}var n=le;e(Node.prototype,"insertBefore",function(t,a){if(t instanceof DocumentFragment){var r=Array.prototype.slice.apply(t.childNodes);if(t=J.call(this,t,a),i(this))for(a=0;a<r.length;a++)m(n,r[a]);return t}return r=i(t),a=J.call(this,t,a),r&&_(n,t),i(this)&&m(n,t),a}),e(Node.prototype,"appendChild",function(t){if(t instanceof DocumentFragment){var a=Array.prototype.slice.apply(t.childNodes);if(t=I.call(this,t),i(this))for(var r=0;r<a.length;r++)m(n,a[r]);return t}return a=i(t),r=I.call(this,t),a&&_(n,t),i(this)&&m(n,t),r}),e(Node.prototype,"cloneNode",function(e){return e=q.call(this,e),this.ownerDocument.__CE_hasRegistry?g(n,e):p(n,e),e}),e(Node.prototype,"removeChild",function(t){var a=i(t),r=$.call(this,t);return a&&_(n,t),r}),e(Node.prototype,"replaceChild",function(t,a){if(t instanceof DocumentFragment){var r=Array.prototype.slice.apply(t.childNodes);if(t=L.call(this,t,a),i(this))for(_(n,a),a=0;a<r.length;a++)m(n,r[a]);return t}var r=i(t),e=L.call(this,t,a),o=i(this);return o&&_(n,a),r&&_(n,t),o&&m(n,t),e}),M&&M.get?t(Node.prototype,M):r(n,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=0;t<this.childNodes.length;t++)e.push(this.childNodes[t].textContent);return e.join("")},set:function(e){for(;this.firstChild;)$.call(this,this.firstChild);I.call(this,document.createTextNode(e))}})})}function k(t){function n(e){return function(){for(var n=[],a=0;a<arguments.length;++a)n[a-0]=arguments[a];for(var r,a=[],o=[],d=0;d<n.length;d++)if(r=n[d],r instanceof Element&&i(r)&&o.push(r),r instanceof DocumentFragment)for(r=r.firstChild;r;r=r.nextSibling)a.push(r);else a.push(r);for(e.apply(this,n),n=0;n<o.length;n++)_(t,o[n]);if(i(this))for(n=0;n<a.length;n++)o=a[n],o instanceof Element&&m(t,o)}}var r=Element.prototype;ne&&(r.before=n(ne)),ne&&(r.after=n(V)),ae&&e(r,"replaceWith",function(){for(var n=[],e=0;e<arguments.length;++e)n[e-0]=arguments[e];for(var a,e=[],r=[],o=0;o<n.length;o++)if(a=n[o],a instanceof Element&&i(a)&&r.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)e.push(a);else e.push(a);for(o=i(this),ae.apply(this,n),n=0;n<r.length;n++)_(t,r[n]);if(o)for(_(t,this),n=0;n<e.length;n++)r=e[n],r instanceof Element&&m(t,r)}),re&&e(r,"remove",function(){var e=i(this);re.call(this),e&&_(t,this)})}function w(){function t(e,t){Object.defineProperty(e,"innerHTML",{enumerable:t.enumerable,configurable:!0,get:t.get,set:function(n){var s,d=this;if(i(this)&&(s=[],l(this,function(e){e!==d&&s.push(e)})),t.set.call(this,n),s)for(var e,a=0;a<s.length;a++)e=s[a],1===e.__CE_state&&o.disconnectedCallback(e);return this.ownerDocument.__CE_hasRegistry?g(o,this):p(o,this),n}})}function n(t,n){e(t,"insertAdjacentElement",function(t,a){var e=i(a);return t=n.call(this,t,a),e&&_(o,a),i(t)&&m(o,a),t})}var o=le;if(N&&e(Element.prototype,"attachShadow",function(e){return this.__CE_shadowRoot=e=N.call(this,e)}),O&&O.get)t(Element.prototype,O);else if(ie&&ie.get)t(HTMLElement.prototype,ie);else{var d=B.call(document,"div");r(o,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return q.call(this,!0).innerHTML},set:function(e){var t="template"===this.localName?this.content:this;for(d.innerHTML=e;0<t.childNodes.length;)$.call(t,t.childNodes[0]);for(;0<d.childNodes.length;)I.call(t,d.childNodes[0])}})})}e(Element.prototype,"setAttribute",function(t,n){if(1!==this.__CE_state)return Q.call(this,t,n);var a=P.call(this,t);Q.call(this,t,n),n=P.call(this,t),o.attributeChangedCallback(this,t,a,n,null)}),e(Element.prototype,"setAttributeNS",function(t,n,a){if(1!==this.__CE_state)return T.call(this,t,n,a);var r=S.call(this,t,n);T.call(this,t,n,a),a=S.call(this,t,n),o.attributeChangedCallback(this,n,r,a,t)}),e(Element.prototype,"removeAttribute",function(e){if(1!==this.__CE_state)return R.call(this,e);var t=P.call(this,e);R.call(this,e),null!==t&&o.attributeChangedCallback(this,e,t,null,null)}),e(Element.prototype,"removeAttributeNS",function(t,n){if(1!==this.__CE_state)return U.call(this,t,n);var a=S.call(this,t,n);U.call(this,t,n);var r=S.call(this,t,n);a!==r&&o.attributeChangedCallback(this,n,a,r,t)}),W?n(HTMLElement.prototype,W):K?n(Element.prototype,K):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),x(o,Element.prototype,{h:ee,append:te}),k(o)}var A=new function(){},h=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);t.prototype.connectedCallback=function(e){var t=e.__CE_definition;t.connectedCallback&&t.connectedCallback.call(e)},t.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;t.disconnectedCallback&&t.disconnectedCallback.call(e)},t.prototype.attributeChangedCallback=function(t,n,a,r,o){var e=t.__CE_definition;e.attributeChangedCallback&&-1<e.observedAttributes.indexOf(n)&&e.attributeChangedCallback.call(t,n,a,r,o)},a.prototype.f=function(e){var t=this.a.readyState;for("interactive"!==t&&"complete"!==t||f(this),t=0;t<e.length;t++)for(var n=e[t].addedNodes,a=0;a<n.length;a++)g(this.c,n[a])},c.prototype.define=function(t,n){var i=this;if(!(n instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!o(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this.c.a.get(t))throw Error("A custom element with name '"+t+"' has already been defined.");if(this.i)throw Error("A custom element is already being defined.");this.i=!0;var d,p,u,m,_;try{var h=function(e){var t=g[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},g=n.prototype;if(!(g instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");d=h("connectedCallback"),p=h("disconnectedCallback"),u=h("adoptedCallback"),m=h("attributeChangedCallback"),_=n.observedAttributes||[]}catch(e){return}finally{this.i=!1}n={localName:t,constructor:n,connectedCallback:d,disconnectedCallback:p,adoptedCallback:u,attributeChangedCallback:m,observedAttributes:_,constructionStack:[]},s(this.c,t,n),this.l.push(n),this.g||(this.g=!0,this.j(function(){return b(i)}))},c.prototype.get=function(e){if(e=this.c.a.get(e))return e.constructor},c.prototype.whenDefined=function(e){if(!o(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.m.get(e);return t?t.f:(t=new d,this.m.set(e,t),this.c.a.get(e)&&!this.l.some(function(t){return t.localName===e})&&E(t),t.f)},c.prototype.v=function(e){f(this.u);var t=this.j;this.j=function(n){return e(function(){return t(n)})}},window.CustomElementRegistry=c,c.prototype.define=c.prototype.define,c.prototype.get=c.prototype.get,c.prototype.whenDefined=c.prototype.whenDefined,c.prototype.polyfillWrapFlushCallback=c.prototype.v;var B=window.Document.prototype.createElement,z=window.Document.prototype.createElementNS,F=window.Document.prototype.importNode,j=window.Document.prototype.prepend,Y=window.Document.prototype.append,H=window.DocumentFragment.prototype.prepend,G=window.DocumentFragment.prototype.append,q=window.Node.prototype.cloneNode,I=window.Node.prototype.appendChild,J=window.Node.prototype.insertBefore,$=window.Node.prototype.removeChild,L=window.Node.prototype.replaceChild,M=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),N=window.Element.prototype.attachShadow,O=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),P=window.Element.prototype.getAttribute,Q=window.Element.prototype.setAttribute,R=window.Element.prototype.removeAttribute,S=window.Element.prototype.getAttributeNS,T=window.Element.prototype.setAttributeNS,U=window.Element.prototype.removeAttributeNS,K=window.Element.prototype.insertAdjacentElement,ee=window.Element.prototype.prepend,te=window.Element.prototype.append,ne=window.Element.prototype.before,V=window.Element.prototype.after,ae=window.Element.prototype.replaceWith,re=window.Element.prototype.remove,oe=window.HTMLElement,ie=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),W=window.HTMLElement.prototype.insertAdjacentElement,de=window.customElements;if(!de||de.forcePolyfill||"function"!=typeof de.define||"function"!=typeof de.get){var le=new t;v(),C(),x(le,DocumentFragment.prototype,{h:H,append:G}),D(),w(),document.__CE_hasRegistry=!0;var X=new c(le);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:X})}}).call(self)}(this),a()}),d.register("a",["b"],function(){"use strict";return{setters:[function(){}],execute:function(){function e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function t(e,t,n,a,r,o,i,d,l,s,c,p,u,m,_,g,h){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=o,e[5]=i,e[6]=d,e[7]=l,e[8]=s,e[9]=c,e[10]=p,e[11]=u,e[12]=m,e[13]=_,e[14]=g,e[15]=h,e}function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=t[4],d=t[5],l=t[6],s=t[7],c=t[8],p=t[9],u=t[10],m=t[11],_=t[12],g=t[13],h=t[14],f=t[15],y=n*d-a*i,b=n*l-r*i,E=n*s-o*i,v=a*l-r*d,x=a*s-o*d,C=r*s-o*l,S=c*g-p*_,T=c*h-u*_,R=c*f-m*_,D=p*h-u*g,k=p*f-m*g,w=u*f-m*h,M=y*w-b*k+E*D+v*R-x*T+C*S;return M?(M=1/M,e[0]=(d*w-l*k+s*D)*M,e[1]=(r*k-a*w-o*D)*M,e[2]=(g*C-h*x+f*v)*M,e[3]=(u*x-p*C-m*v)*M,e[4]=(l*R-i*w-s*T)*M,e[5]=(n*w-r*R+o*T)*M,e[6]=(h*E-_*C-f*b)*M,e[7]=(c*C-u*E+m*b)*M,e[8]=(i*k-d*R+s*S)*M,e[9]=(a*R-n*k-o*S)*M,e[10]=(_*x-g*E+f*y)*M,e[11]=(p*E-c*x-m*y)*M,e[12]=(d*T-i*D-l*S)*M,e[13]=(n*D-a*T+r*S)*M,e[14]=(g*b-_*v-h*y)*M,e[15]=(c*v-p*b+u*y)*M,e):null}function r(e,t,n){let a=t[0],r=t[1],o=t[2],i=t[3],d=t[4],l=t[5],s=t[6],c=t[7],p=t[8],u=t[9],m=t[10],_=t[11],g=t[12],h=t[13],f=t[14],y=t[15],b=n[0],E=n[1],v=n[2],x=n[3];return e[0]=b*a+E*d+v*p+x*g,e[1]=b*r+E*l+v*u+x*h,e[2]=b*o+E*s+v*m+x*f,e[3]=b*i+E*c+v*_+x*y,b=n[4],E=n[5],v=n[6],x=n[7],e[4]=b*a+E*d+v*p+x*g,e[5]=b*r+E*l+v*u+x*h,e[6]=b*o+E*s+v*m+x*f,e[7]=b*i+E*c+v*_+x*y,b=n[8],E=n[9],v=n[10],x=n[11],e[8]=b*a+E*d+v*p+x*g,e[9]=b*r+E*l+v*u+x*h,e[10]=b*o+E*s+v*m+x*f,e[11]=b*i+E*c+v*_+x*y,b=n[12],E=n[13],v=n[14],x=n[15],e[12]=b*a+E*d+v*p+x*g,e[13]=b*r+E*l+v*u+x*h,e[14]=b*o+E*s+v*m+x*f,e[15]=b*i+E*c+v*_+x*y,e}function o(e,t,n){let a,r,o,i,d,l,s,c,p,u,m,_,g=n[0],h=n[1],f=n[2];return t===e?(e[12]=t[0]*g+t[4]*h+t[8]*f+t[12],e[13]=t[1]*g+t[5]*h+t[9]*f+t[13],e[14]=t[2]*g+t[6]*h+t[10]*f+t[14],e[15]=t[3]*g+t[7]*h+t[11]*f+t[15]):(a=t[0],r=t[1],o=t[2],i=t[3],d=t[4],l=t[5],s=t[6],c=t[7],p=t[8],u=t[9],m=t[10],_=t[11],e[0]=a,e[1]=r,e[2]=o,e[3]=i,e[4]=d,e[5]=l,e[6]=s,e[7]=c,e[8]=p,e[9]=u,e[10]=m,e[11]=_,e[12]=a*g+d*h+p*f+t[12],e[13]=r*g+l*h+u*f+t[13],e[14]=o*g+s*h+m*f+t[14],e[15]=i*g+c*h+_*f+t[15]),e}function i(e,t,n){let a=n[0],r=n[1],o=n[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function d(e,t,n){let a=Te(n),r=Se(n),o=t[4],i=t[5],d=t[6],l=t[7],s=t[8],c=t[9],p=t[10],u=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+s*a,e[5]=i*r+c*a,e[6]=d*r+p*a,e[7]=l*r+u*a,e[8]=s*r-o*a,e[9]=c*r-i*a,e[10]=p*r-d*a,e[11]=u*r-l*a,e}function l(e,t,n){let a=Te(n),r=Se(n),o=t[0],i=t[1],d=t[2],l=t[3],s=t[8],c=t[9],p=t[10],u=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r-s*a,e[1]=i*r-c*a,e[2]=d*r-p*a,e[3]=l*r-u*a,e[8]=o*a+s*r,e[9]=i*a+c*r,e[10]=d*a+p*r,e[11]=l*a+u*r,e}function s(e,t,n){let a=Te(n),r=Se(n),o=t[0],i=t[1],d=t[2],l=t[3],s=t[4],c=t[5],p=t[6],u=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+s*a,e[1]=i*r+c*a,e[2]=d*r+p*a,e[3]=l*r+u*a,e[4]=s*r-o*a,e[5]=c*r-i*a,e[6]=p*r-d*a,e[7]=u*r-l*a,e}function c(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=n+n,d=a+a,l=r+r,s=n*i,c=a*i,p=a*d,u=r*i,m=r*d,_=r*l,g=o*i,h=o*d,f=o*l;return e[0]=1-p-_,e[1]=c+f,e[2]=u-h,e[3]=0,e[4]=c-f,e[5]=1-s-_,e[6]=m+g,e[7]=0,e[8]=u+h,e[9]=m-g,e[10]=1-s-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function p(e,t,n,a,r){let o=1/Math.tan(t/2),i=1/(a-r);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+a)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*a*i,e[15]=0,e}function u(){let e=new Ne(2);return e[0]=0,e[1]=0,e}function m(e,t){return e[0]=t[0],e[1]=t[1],e}function _(e,t,n){return e[0]=t,e[1]=n,e}function g(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function h(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function f(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function y(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function b(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function E(e,t){var n=t[0]-e[0],a=t[1]-e[1];return ve(n*n+a*a)}function v(e,t){var n=t[0]-e[0],a=t[1]-e[1];return n*n+a*a}function x(e){var t=e[0],n=e[1];return ve(t*t+n*n)}function C(e){var t=e[0],n=e[1];return t*t+n*n}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e}function T(e,t){var n=t[0],a=t[1],r=n*n+a*a;return 0<r&&(r=1/ve(r),e[0]=t[0]*r,e[1]=t[1]*r),e}function R(e,t){return e[0]*t[0]+e[1]*t[1]}function D(e,t,n){var a=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=a,e}function k(e,n,a,r){var t=n[0],o=n[1];return e[0]=t+r*(a[0]-t),e[1]=o+r*(a[1]-o),e}function w(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[3]*r+n[6],e[1]=n[1]*a+n[4]*r+n[7],e}function M(e,t,n){let a=t[0],r=t[1];return e[0]=n[0]*a+n[4]*r+n[12],e[1]=n[1]*a+n[5]*r+n[13],e}function P(e,t){return e[0]===t[0]&&e[1]===t[1]}function L(){let e=new Ne(3);return e[0]=0,e[1]=0,e[2]=0,e}function A(e){let t=e[0],n=e[1],a=e[2];return ve(t*t+n*n+a*a)}function N(e,t,n){let a=new Ne(3);return a[0]=e,a[1]=t,a[2]=n,a}function B(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function F(e,t,n,a){return e[0]=t,e[1]=n,e[2]=a,e}function z(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function j(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function O(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function U(e){let t=e[0],n=e[1],a=e[2];return t*t+n*n+a*a}function I(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Y(e,t){let n=t[0],a=t[1],r=t[2],o=n*n+a*a+r*r;return 0<o&&(o=1/ve(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function H(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function V(e,t,n){let a=t[0],r=t[1],o=t[2],i=n[0],d=n[1],l=n[2];return e[0]=r*l-o*d,e[1]=o*i-a*l,e[2]=a*d-r*i,e}function X(e,t,n){let a=t[0],r=t[1],o=t[2],i=n[3]*a+n[7]*r+n[11]*o+n[15];return i=i||1,e[0]=(n[0]*a+n[4]*r+n[8]*o+n[12])/i,e[1]=(n[1]*a+n[5]*r+n[9]*o+n[13])/i,e[2]=(n[2]*a+n[6]*r+n[10]*o+n[14])/i,e}function G(e,t){let n=N(e[0],e[1],e[2]),a=N(t[0],t[1],t[2]);Y(n,n),Y(a,a);let r=H(n,a);return 1<r?0:-1>r?Ee:ye(r)}function q(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function W(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255]:null}function Q(){let e=new Ne(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function J(e,t,n,a,r){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e}function Z(){let e=new Ne(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function $(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function K(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ee(e,t,n,a,r,o,i,d,l,s){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=o,e[5]=i,e[6]=d,e[7]=l,e[8]=s,e}function te(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ne(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=t[4],d=t[5],l=t[6],s=t[7],c=t[8],p=c*i-d*s,u=-c*o+d*l,m=s*o-i*l,_=n*p+a*u+r*m;return _?(_=1/_,e[0]=p*_,e[1]=(-c*a+r*s)*_,e[2]=(d*a-r*i)*_,e[3]=u*_,e[4]=(c*n-r*l)*_,e[5]=(-d*n+r*o)*_,e[6]=m*_,e[7]=(-s*n+a*l)*_,e[8]=(i*n-a*o)*_,e):null}function ae(e,t,n){let a=t[0],r=t[1],o=t[2],i=t[3],d=t[4],l=t[5],s=t[6],c=t[7],p=t[8],u=n[0],m=n[1],_=n[2],g=n[3],h=n[4],f=n[5],y=n[6],b=n[7],E=n[8];return e[0]=u*a+m*i+_*s,e[1]=u*r+m*d+_*c,e[2]=u*o+m*l+_*p,e[3]=g*a+h*i+f*s,e[4]=g*r+h*d+f*c,e[5]=g*o+h*l+f*p,e[6]=y*a+b*i+E*s,e[7]=y*r+b*d+E*c,e[8]=y*o+b*l+E*p,e}function re(e,t,n){let a=t[0],r=t[1],o=t[2],i=t[3],d=t[4],l=t[5],s=t[6],c=t[7],p=t[8],u=n[0],m=n[1];return e[0]=a,e[1]=r,e[2]=o,e[3]=i,e[4]=d,e[5]=l,e[6]=u*a+m*i+s,e[7]=u*r+m*d+c,e[8]=u*o+m*l+p,e}function oe(e,t,n){let a=n[0],r=n[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ie(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=n+n,d=a+a,l=r+r,s=n*i,c=a*i,p=a*d,u=r*i,m=r*d,_=r*l,g=o*i,h=o*d,f=o*l;return e[0]=1-p-_,e[3]=c-f,e[6]=u+h,e[1]=c+f,e[4]=1-s-_,e[7]=m-g,e[2]=u-h,e[5]=m+g,e[8]=1-s-p,e}function de(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function le(){let e=new Ne(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function se(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function ce(e,t,n){n*=0.5;let a=Te(n);return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=Se(n),e}function pe(e,t,n){let a=t[0],r=t[1],o=t[2],i=t[3],d=n[0],l=n[1],s=n[2],c=n[3];return e[0]=a*c+i*d+r*s-o*l,e[1]=r*c+i*l+o*d-a*s,e[2]=o*c+i*s+a*l-r*d,e[3]=i*c-a*d-r*l-o*s,e}function ue(e,t,n){n*=0.5;let a=t[0],r=t[1],o=t[2],i=t[3],d=Te(n),l=Se(n);return e[0]=a*l+i*d,e[1]=r*l+o*d,e[2]=o*l-r*d,e[3]=i*l-a*d,e}function me(e,t,n){n*=0.5;let a=t[0],r=t[1],o=t[2],i=t[3],d=Te(n),l=Se(n);return e[0]=a*l-o*d,e[1]=r*l+i*d,e[2]=o*l+a*d,e[3]=i*l-r*d,e}function _e(e,t,n){n*=0.5;let a=t[0],r=t[1],o=t[2],i=t[3],d=Te(n),l=Se(n);return e[0]=a*l+r*d,e[1]=r*l-a*d,e[2]=o*l+i*d,e[3]=i*l-o*d,e}function ge(e,n,a,r){let t,o,i,d,l,s=n[0],c=n[1],p=n[2],u=n[3],m=a[0],_=a[1],g=a[2],h=a[3];return o=s*m+c*_+p*g+u*h,0>o&&(o=-o,m=-m,_=-_,g=-g,h=-h),1e-6<1-o?(t=ye(o),i=Te(t),d=Te((1-r)*t)/i,l=Te(r*t)/i):(d=1-r,l=r),e[0]=d*s+l*m,e[1]=d*c+l*_,e[2]=d*p+l*g,e[3]=d*u+l*h,e}function he(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=n*n+a*a+r*r+o*o,d=i?1/i:0;return e[0]=-n*d,e[1]=-a*d,e[2]=-r*d,e[3]=o*d,e}function fe(e,t){let n,a=t[0]+t[4]+t[8];if(0<a)n=ve(a+1),e[3]=0.5*n,n=0.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);let r=(a+1)%3,o=(a+2)%3;n=ve(t[3*a+a]-t[3*r+r]-t[3*o+o]+1),e[a]=0.5*n,n=0.5/n,e[3]=(t[3*r+o]-t[3*o+r])*n,e[r]=(t[3*r+a]+t[3*a+r])*n,e[o]=(t[3*o+a]+t[3*a+o])*n}return e}var ye=Math.acos,be=Math.abs,Ee=Math.PI,ve=Math.sqrt,xe=Math.max,Ce=Math.min,Se=Math.cos,Te=Math.sin;class Re extends Set{constructor(){super(),this._onceCallbacks=new Set}add(e,{once:t=!1}={}){t&&this._onceCallbacks.add(e),super.add(e)}dispatch(e){for(let t of this)t(e),this._onceCallbacks.has(t)&&(this._onceCallbacks.delete(t),this.delete(t))}}var De=new class extends Re{constructor(){super(),this._updateBinded=this.update.bind(this),this._previousTimestamp=0,this.deltaTime=0,this.timeScale=1,this.update()}update(e){requestAnimationFrame(this._updateBinded);let t=window.performance?window.performance.now():Date.now();this.deltaTime=.001*(t-this._previousTimestamp),this.timeScale=this.deltaTime/.0166666667,this._previousTimestamp=t,this.dispatch(e)}};class ke extends HTMLElement{constructor({autoplay:e=!0,background:t=!1}={}){super(),this._autoplay=e||this.hasAttribute("autoplay"),this._background=t||this.hasAttribute("background"),this.paused=!0,this._updateBinded=this.update.bind(this)}connectedCallback(){this._background||(window.addEventListener("blur",this._pauseBinded=this.pause.bind(this)),window.addEventListener("focus",this._playBinded=this.play.bind(this))),this._autoplay&&this.play()}disconnectedCallback(){this.pause(),window.removeEventListener("blur",this._pauseBinded),window.removeEventListener("focus",this._playBinded)}play(){this.paused=!1,De.add(this._updateBinded),this.dispatchEvent(new Event("playing"))}pause(){this.paused=!0,De.delete(this._updateBinded),this.dispatchEvent(new Event("pause"))}update(){}}window.customElements.define("dlib-loop",ke);const we=new Map,Me=new Map,Pe=new Map([["text",new Set(["txt","html","css","js","svg"])],["json",new Set(["json"])],["binary",new Set(["bin"])]]);class Le{static get onLoad(){return Promise.all(we.values())}static get promises(){return we}static get typeMap(){return Pe}static get(e){return Me.get(e)}static load(e){const t=e instanceof Array;t||(e=[e]);let n=[];for(let t of e){if(!t)continue;let e=we.get(t)||new Promise(function(e){if(Le.get(t))return void e(Le.get(t));let n,a=(n)=>{we.delete(t),Me.set(t,n),e(n)};if("string"==typeof t){let e=/[\\/](.*)\.(.*)$/.exec(t)[2];if(/\.(png|jpg|gif)$/.test(t))n=document.createElement("img");else if(/\.(mp4|webm)$/.test(t))n=document.createElement("video");else if(/\.(mp3|ogg)$/.test(t))n=document.createElement("audio");else if(/\.(woff|woff2)$/.test(t)){let e=new FontFace(/([^\/]*)\.(woff|woff2)$/.exec(t)[1],`url("${t}")`);e.load().then(a),document.fonts.add(e)}else fetch(t).then((t)=>{let n;return n=Le.typeMap.get("json").has(e)?"json":Le.typeMap.get("binary").has(e)?"arrayBuffer":Le.typeMap.get("text").has(e)?"text":"blob",t[n]()}).then(a)}if(t instanceof HTMLElement&&(n=t),n){const e=n.src||t,r=()=>{n.removeEventListener("canplaythrough",r),n.removeEventListener("load",r),a(n)};n.play?fetch(e).then(()=>{if(n.addEventListener("canplaythrough",r),n.play(),!n.autoplay){let e=function(){n.pause(),n.removeEventListener("playing",e)};n.addEventListener("playing",e)}}):n.addEventListener("load",r),n.src=e}});n.push(e),we.set(t,e)}return t?Promise.all(n):n[0]}}const Ae=1e-6;let Ne="undefined"==typeof Float32Array?Array:Float32Array;const Be=Math.random;class ze extends Float32Array{constructor(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return super(e),this}set x(e){this[12]=e}get x(){return this[12]}set y(e){this[13]=e}get y(){return this[13]}set z(e){this[14]=e}get z(){return this[14]}set w(e){this[15]=e}get w(){return this[15]}copy(t){return e(this,t),this}set(e,n,a,r,o,i,d,l,s,c,p,u,m,_,g,h){return e.length?this.copy(e):(t(this,e,n,a,r,o,i,d,l,s,c,p,u,m,_,g,h),this)}translate(e,t=this){return o(this,t,e),this}rotateX(e,t=this){return d(this,t,e),this}rotateY(e,t=this){return l(this,t,e),this}rotateZ(e,t=this){return s(this,t,e),this}scale(e,t=this){return i(this,t,"number"==typeof e?[e,e,e]:e),this}multiply(e,t){return t?r(this,e,t):r(this,this,e),this}identity(){return n(this),this}copy(t){return e(this,t),this}fromPerspective({fov:e,aspectRatio:t,near:n,far:a}={}){return p(this,e,t,n,a),this}fromQuaternion(e){return c(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}invert(e=this){return a(this,e),this}}const Fe=function(){let e=u();return function(t,n,a,r,o,d){let s,i;for(n||(n=2),a||(a=0),i=r?Ce(r*n+a,t.length):t.length,s=a;s<i;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,d),t[s]=e[0],t[s+1]=e[1];return t}}();var je=Object.freeze({create:u,clone:function(e){let t=new Ne(2);return t[0]=e[0],t[1]=e[1],t},fromValues:function(e,t){let n=new Ne(2);return n[0]=e,n[1]=t,n},copy:m,set:_,add:g,subtract:h,multiply:f,divide:y,ceil:function(e,t){var n=Math.ceil;return e[0]=n(t[0]),e[1]=n(t[1]),e},floor:function(e,t){var n=Math.floor;return e[0]=n(t[0]),e[1]=n(t[1]),e},min:function(e,t,n){return e[0]=Ce(t[0],n[0]),e[1]=Ce(t[1],n[1]),e},max:function(e,t,n){return e[0]=xe(t[0],n[0]),e[1]=xe(t[1],n[1]),e},round:function(e,t){var n=Math.round;return e[0]=n(t[0]),e[1]=n(t[1]),e},scale:b,scaleAndAdd:function(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e},distance:E,squaredDistance:v,length:x,squaredLength:C,negate:S,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:T,dot:R,cross:D,lerp:k,random:function(e,t){t=t||1;var n=2*Be()*Ee;return e[0]=Se(n)*t,e[1]=Te(n)*t,e},transformMat2:function(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[2]*r,e[1]=n[1]*a+n[3]*r,e},transformMat2d:function(e,t,n){var a=t[0],r=t[1];return e[0]=n[0]*a+n[2]*r+n[4],e[1]=n[1]*a+n[3]*r+n[5],e},transformMat3:w,transformMat4:M,str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:P,equals:function(e,t){let n=e[0],a=e[1],r=t[0],o=t[1];return be(n-r)<=Ae*xe(1,be(n),be(r))&&be(a-o)<=Ae*xe(1,be(a),be(o))},len:x,sub:h,mul:f,div:y,dist:E,sqrDist:v,sqrLen:C,forEach:Fe});class Oe extends Float32Array{constructor(e=0,t=0){return super(2),this.set(e,t),this}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}set(e,t){return _(this,e,t),this}copy(e){return m(this,e),this}add(e){return g(this,this,e),this}get size(){return x(this)}get squaredSize(){return C(this)}subtract(e){return h(this,this,e),this}negate(e=this){return S(this,e),this}cross(e,t){return D(this,e,t),this}scale(e){return b(this,this,e),this}normalize(){T(this,this)}dot(e){return R(this,e)}equals(e){return P(this,e)}applyMatrix3(e){return w(this,this,e),this}applyMatrix4(e){return M(this,this,e),this}angle(e){return je.angle(this,e)}lerp(e,t){k(this,this,e,t)}clone(){return new Vector3(this.x,this.y,this.z)}}(function(){let e=L();return function(t,n,a,r,o,d){let s,i;for(n||(n=3),a||(a=0),i=r?Ce(r*n+a,t.length):t.length,s=a;s<i;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,d),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();class Ue extends Float32Array{constructor(e=[0,0,0]){return super(e),this}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get z(){return this[2]}set z(e){this[2]=e}set(e,t,n){return F(this,e,t,n),this}copy(e){return B(this,e),this}add(e){return z(this,this,e),this}get size(){return A(this)}get squaredSize(){return U(this)}subtract(e){return j(this,this,e),this}negate(e=this){return I(this,e),this}cross(e,t){return V(this,e,t),this}scale(e){return O(this,this,e),this}normalize(){return Y(this,this),this}dot(e){return H(this,e)}equals(e){return q(this,e)}applyMatrix4(e){return X(this,this,e),this}angle(e){return G(this,e)}clone(){return new Ue(this.x,this.y,this.z)}fromHex(e){return this.copy(W(e)),this}}(function(){let e=Q();return function(t,n,a,r,o,d){let s,i;for(n||(n=4),a||(a=0),i=r?Ce(r*n+a,t.length):t.length,s=a;s<i;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,d),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();class Ie extends Float32Array{constructor(e=0,t=0,n=0,a=0){return super(4),this.set(e,t,n,a),this}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get z(){return this[2]}set z(e){this[2]=e}get w(){return this[3]}set w(e){this[3]=e}set(e,t,n,a){return J(this,e,t,n,a),this}}var Ye=Object.freeze({create:Z,fromMat4:$,clone:function(e){let t=new Ne(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:K,fromValues:function(e,t,n,a,r,o,i,d,l){let s=new Ne(9);return s[0]=e,s[1]=t,s[2]=n,s[3]=a,s[4]=r,s[5]=o,s[6]=i,s[7]=d,s[8]=l,s},set:ee,identity:te,transpose:function(e,t){if(e===t){let n=t[1],a=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=a,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:ne,adjoint:function(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=t[4],d=t[5],l=t[6],s=t[7],c=t[8];return e[0]=i*c-d*s,e[1]=r*s-a*c,e[2]=a*d-r*i,e[3]=d*l-o*c,e[4]=n*c-r*l,e[5]=r*o-n*d,e[6]=o*s-i*l,e[7]=a*l-n*s,e[8]=n*i-a*o,e},determinant:function(e){let t=e[0],n=e[1],a=e[2],r=e[3],o=e[4],i=e[5],d=e[6],l=e[7],s=e[8];return t*(s*o-i*l)+n*(-s*r+i*d)+a*(l*r-o*d)},multiply:ae,translate:re,rotate:function(e,t,n){let a=t[0],r=t[1],o=t[2],i=t[3],d=t[4],l=t[5],p=t[6],u=t[7],m=t[8],_=Te(n),s=Se(n);return e[0]=s*a+_*i,e[1]=s*r+_*d,e[2]=s*o+_*l,e[3]=s*i-_*a,e[4]=s*d-_*r,e[5]=s*l-_*o,e[6]=p,e[7]=u,e[8]=m,e},scale:oe,fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){let n=Te(t),a=Se(t);return e[0]=a,e[1]=n,e[2]=0,e[3]=-n,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:ie,normalFromMat4:function(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=t[4],d=t[5],l=t[6],s=t[7],c=t[8],p=t[9],u=t[10],m=t[11],_=t[12],g=t[13],h=t[14],f=t[15],y=n*d-a*i,b=n*l-r*i,E=n*s-o*i,v=a*l-r*d,x=a*s-o*d,C=r*s-o*l,S=c*g-p*_,T=c*h-u*_,R=c*f-m*_,D=p*h-u*g,k=p*f-m*g,w=u*f-m*h,M=y*w-b*k+E*D+v*R-x*T+C*S;return M?(M=1/M,e[0]=(d*w-l*k+s*D)*M,e[1]=(l*R-i*w-s*T)*M,e[2]=(i*k-d*R+s*S)*M,e[3]=(r*k-a*w-o*D)*M,e[4]=(n*w-r*R+o*T)*M,e[5]=(a*R-n*k-o*S)*M,e[6]=(g*C-h*x+f*v)*M,e[7]=(h*E-_*C-f*b)*M,e[8]=(_*x-g*E+f*y)*M,e):null},projection:function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){var t=Math.pow;return ve(t(e[0],2)+t(e[1],2)+t(e[2],2)+t(e[3],2)+t(e[4],2)+t(e[5],2)+t(e[6],2)+t(e[7],2)+t(e[8],2))},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},subtract:de,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},multiplyScalarAndAdd:function(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e[4]=t[4]+n[4]*a,e[5]=t[5]+n[5]*a,e[6]=t[6]+n[6]*a,e[7]=t[7]+n[7]*a,e[8]=t[8]+n[8]*a,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){let n=e[0],a=e[1],r=e[2],o=e[3],i=e[4],d=e[5],l=e[6],s=e[7],c=e[8],p=t[0],u=t[1],m=t[2],_=t[3],g=t[4],h=t[5],f=t[6],y=t[7],b=t[8];return be(n-p)<=Ae*xe(1,be(n),be(p))&&be(a-u)<=Ae*xe(1,be(a),be(u))&&be(r-m)<=Ae*xe(1,be(r),be(m))&&be(o-_)<=Ae*xe(1,be(o),be(_))&&be(i-g)<=Ae*xe(1,be(i),be(g))&&be(d-h)<=Ae*xe(1,be(d),be(h))&&be(l-f)<=Ae*xe(1,be(l),be(f))&&be(s-y)<=Ae*xe(1,be(s),be(y))&&be(c-b)<=Ae*xe(1,be(c),be(b))},mul:ae,sub:de});class He extends Float32Array{constructor(e=[1,0,0,0,1,0,0,0,1]){return super(e),this}set(e,t,n,a,r,o,i,d,l){return ee(this,e,t,n,a,r,o,i,d,l),this}translate(e,t=this){return re(this,t,e),this}rotate(e,t=this){return Ye.rotateX(this,t,e),this}scale(e,t=this){return oe(this,t,e),this}multiply(e,t){return t?ae(this,e,t):ae(this,this,e),this}identity(){return te(this),this}copy(e){return K(this,e),this}fromMatrix4(e){return $(this,e),this}fromQuaternion(e){return ie(this,e),this}fromBasis(e,t,n){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2]),this}invert(e=this){return ne(this,e),this}}class Ve{static add(e="void main() {}",t){for(let[n,a]of t)e="start"===n?`${a}\n${e}`:"end"===n?e.replace(/(}\s*$)/,`\n${a}\n$1`):"main"===n?e.replace(/(\bvoid\b +\bmain\b[\s\S]*?{\s*)/,`$1\n${a}\n`):e.replace(n,a);return e}constructor({vertexShader:e=`
    void main() {
      gl_Position = vec4(0., 0., 0., 1.);
    }
  `,fragmentShader:t=`
    void main() {
      gl_FragColor = vec4(1.);
    }
  `,uniforms:n=[],vertexShaderChunks:a=[],fragmentShaderChunks:r=[],shaders:o=[]}={}){this.uniforms=new Map,this._uniformTypes=new Map,this.vertexShader=e,this.fragmentShader=t,this._vertexShaderChunks=[],this._fragmentShaderChunks=[],this.add({vertexShaderChunks:a,fragmentShaderChunks:r,uniforms:n});for(let i of o)this.add(i)}add({vertexShaderChunks:e=[],fragmentShaderChunks:t=[],uniforms:n=[]}={}){this.vertexShader=Ve.add(this.vertexShader,e),this._vertexShaderChunks.push(...e),this.fragmentShader=Ve.add(this.fragmentShader,t),this._fragmentShaderChunks.push(...t);for(let[a,r]of n)this.uniforms.set(a,r)}set vertexShader(e){this._vertexShader=e,this._parseUniforms(this._vertexShader)}get vertexShader(){return this._vertexShader}set fragmentShader(e){this._fragmentShader=e,this._parseUniforms(this._fragmentShader)}get fragmentShader(){return this._fragmentShader}get vertexShaderChunks(){return this._vertexShaderChunks}get fragmentShaderChunks(){return this._fragmentShaderChunks}_parseUniforms(e,t){t=Object.assign({Vector2:new Float32Array(2),Vector3:new Float32Array(3),Vector4:new Float32Array(4),Matrix3:new Float32Array([1,0,0,0,1,0,0,0,1]),Matrix4:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Texture2D:class{},TextureCube:class{}},t);for(let n,a=/^\s*uniform (.[^ ]+) (.[^ ;\[\]]+)\[? *(\d+)? *\]?/gm;n=a.exec(e);){let[,e,a,r]=n,o=parseInt(r);if(this.uniforms.has(a))continue;let i,d;if(this._uniformTypes.set(a,e),/float|double/.test(e))i=isNaN(o)?0:Array(o).fill(0);else if(/int|uint/.test(e))i=isNaN(o)?0:Array(o).fill(0);else if(/sampler2D/.test(e))i=isNaN(o)?new t.Texture2D:Array(o).fill().map(()=>new t.Texture2D);else if(/samplerCube/.test(e))i=isNaN(o)?new t.TextureCube:Array(o).fill().map(()=>new t.TextureCube);else if(d=/(.?)vec(\d)/.exec(e)){let e=d[2];i=isNaN(o)?new t[`Vector${e}`]:Array(o).fill().map(()=>new t[`Vector${e}`])}else if(d=/mat(\d)/.exec(e)){let e=d[1];i=isNaN(o)?new t[`Matrix${e}`]:Array(o).fill().map(()=>new t[`Matrix${e}`])}else i=null;this.uniforms.set(a,i)}}}class Xe{constructor({gl:e,data:t=void 0,color:n=[1,1,1,1],minFilter:a=e.NEAREST_MIPMAP_LINEAR,magFilter:r=e.LINEAR,wrapS:o=e.REPEAT,wrapT:i=e.REPEAT,generateMipmap:d=!1}={}){this.gl=e,this._texture=this.gl.createTexture(),t?this.data=t:this.color=n,this._minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this._magFilter=this.gl.LINEAR,this._wrapS=this.gl.REPEAT,this._wrapT=this.gl.REPEAT,this.minFilter=a,this.magFilter=r,this.wrapS=o,this.wrapT=i}generateMipmap(){this.gl.generateMipmap(this.gl.TEXTURE_2D)}set data(e){this.bind(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)}set color(e){this.bind(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]]))}set minFilter(e){this._minFilter===e||(this._minFilter=e,this.bind(),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this._minFilter))}get minFilter(){return this._minFilter}set magFilter(e){this._magFilter===e||(this._magFilter=e,this.bind(),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this._magFilter))}get magFilter(){return this._magFilter}set wrapS(e){this._wrapS===e||(this._wrapS=e,this.bind(),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this._wrapS))}get wrapS(){return this._wrapS}set wrapT(e){this._wrapT===e||(this._wrapT=e,this.bind(),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this._wrapT))}get wrapT(){return this._wrapT}bind({unit:e=0}={}){this.gl.activeTexture(this.gl[`TEXTURE${e}`]),this.gl.bindTexture(this.gl.TEXTURE_2D,this._texture)}unbind(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}}class Ge extends Ve{constructor({gl:e,vertexShader:t=void 0,fragmentShader:n=void 0,uniforms:a=void 0,attributes:r=void 0,vertexShaderChunks:o=void 0,fragmentShaderChunks:i=void 0,shaders:d=void 0}={}){super({vertexShader:t,fragmentShader:n,uniforms:a,attributes:r,vertexShaderChunks:o,fragmentShaderChunks:i,shaders:d}),this._attachedShaders=new Map;const l=e.createProgram(),s=this,c=new Map;class p extends Map{set(t,{buffer:n,location:o=c.get(t),size:a,type:i=e.FLOAT,normalized:d=!1,stride:s=0,offset:p=0,divisor:r}={}){if(t instanceof Map){for(let[e,n]of t)this.set(e,n);return}n.bind(),o||(o=e.getAttribLocation(l,t),-1===o&&console.warn(`Attribute "${t}" is missing or never used`),c.set(t,o)),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,a,i,d,s,p),r!==void 0&&e.vertexAttribDivisor(o,r),super.set(t,{buffer:n,size:a,type:i,normalized:d,stride:s,offset:p})}}const u=new Map,m=new Map;class _ extends Map{set(t,...n){let a=u.get(t);a||(a=e.getUniformLocation(l,t),u.set(t,a));let r=m.get(t);r||(r=/int|ivec|sampler2D|samplerCube/.test(s._uniformTypes.get(t))?"iv":"fv",m.set(t,r));let o=n[0];o.length===void 0&&(1<n.length?(o=s.uniforms.get(t),o.set(...n)):o=n),4>=o.length?e[`uniform${o.length||1}${r}`](a,o):9===o.length?e.uniformMatrix3fv(a,!1,o):16===o.length&&e.uniformMatrix4fv(a,!1,o),super.set(t,o)}}this.gl=e,this._program=l,this.vertexShader=this.vertexShader,this.fragmentShader=this.fragmentShader,this.use(),this.attributes=new p,this.uniforms=new _([...this.uniforms])}set vertexShader(e){super.vertexShader=e,this.gl&&this._updateShader(this.gl.VERTEX_SHADER,this.vertexShader)}get vertexShader(){return super.vertexShader}set fragmentShader(e){super.fragmentShader=e,this.gl&&this._updateShader(this.gl.FRAGMENT_SHADER,this.fragmentShader)}get fragmentShader(){return super.fragmentShader}use(){this.gl.useProgram(this._program)}_updateShader(e,t){if(t){const n=this.gl.createShader(e);if(this.gl.shaderSource(n,t),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)){const e=this.gl.getShaderInfoLog(n),a=parseFloat(/ERROR: 0:(\d+):/.exec(e)[1]),r=t.split("\n");console.error(`${e}\nat: ${r[a-1].replace(/^\s*/,"")}`)}const a=this._attachedShaders.get(e);a&&(this.gl.detachShader(this._program,a),this.gl.deleteShader(a)),this._attachedShaders.set(e,n),this.gl.attachShader(this._program,n),this.gl.linkProgram(this._program)}}_parseUniforms(e){super._parseUniforms(e,{Vector2:Oe,Vector3:Ue,Vector4:Ie,Matrix3:He,Matrix4:ze,GLTexture:Xe})}}class qe{constructor({gl:e,size:t=0,data:n=new ArrayBuffer(t),target:a=e.ARRAY_BUFFER,usage:r=e.STATIC_DRAW}={}){this.gl=e,this._target=a,this._usage=r,this._buffer=this.gl.createBuffer(),this.data=n}set data(e){this._data=e,this.bind(),this.gl.bufferData(this._target,this._data,this._usage)}get data(){return this._data}bind(){this.gl.bindBuffer(this._target,this._buffer)}unbind(){this.gl.bindBuffer(this._target,null)}}class We{constructor({gl:e,attributes:t,indiceData:n}={}){this.gl=e,this.gl.getExtension("OES_element_index_uint"),this.attributes=new Map(t);for(let[a,r]of this.attributes)r.buffer=new qe({gl:this.gl,data:r.data}),r.count=r.count||r.data.length/r.size;n&&(this.indices={buffer:new qe({gl:this.gl,data:n,target:this.gl.ELEMENT_ARRAY_BUFFER}),type:n instanceof Uint8Array?this.gl.UNSIGNED_BYTE:n instanceof Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,offset:0,count:n?n.length:0})}bind(){for(let e of this.attributes.values())e.buffer.bind();this.indices&&this.indices.buffer.bind()}unbind(){for(let e of this.attributes.values())e.buffer.unbind();this.indices&&this.indices.buffer.unbind()}draw({mode:t=this.gl.TRIANGLES,elements:n=!!this.indices,count:a=n?this.indices.count:this.attributes.get("position").count,offset:r=this.indices?this.indices.offset:0,type:o=this.indices?this.indices.type:null,first:i=0,instanceCount:e}={}){n?e===void 0?this.gl.drawElements(t,a,o,r):this.gl.drawElementsInstanced(t,a,o,r,e):e===void 0?this.gl.drawArrays(t,i,a):this.gl.drawArraysInstanced(t,i,a,e)}}class Qe{constructor({near:e=0.01,far:t=1e3,aspectRatio:n=1,fov:a=Ee/3}={}){this._near=e,this._far=t,this._aspectRatio=n,this._fov=a,this.transform=new ze,this._projectionMatrix=new ze,this._projectionViewMatrix=new ze,this._inverseMatrix=new ze,this._updateProjectionMatrix()}set near(e){this._near=e,this._updateProjectionMatrix()}get near(){return this._near}set far(e){this._far=e,this._updateProjectionMatrix()}get far(){return this._far}set fov(e){this._fov=e,this._updateProjectionMatrix()}get fov(){return this._fov}set aspectRatio(e){this._aspectRatio=e,this._updateProjectionMatrix()}get aspectRatio(){return this._aspectRatio}get projectionMatrix(){return this._projectionMatrix}get inverseMatrix(){return this._inverseMatrix.invert(this.transform)}get projectionViewMatrix(){return this._projectionViewMatrix.copy(this.projectionMatrix).multiply(this.inverseMatrix)}_updateProjectionMatrix(){this._projectionMatrix.fromPerspective(this)}}let Je=new Map;class Ze extends Oe{static get TOUCH_TYPE(){return"touchtype"}static get MOUSE_TYPE(){return"mousetype"}static get(e){let t=Je.get(e);return t||(t=new Ze(e)),t}get downed(){return this._downed}constructor(e=document.body){super(),this.domElement=e,this.type=Ze.TOUCH_TYPE,this._position=new Oe,this.velocity=new Oe,this.dragOffset=new Oe,this.centered=new Oe,this.centeredFlippedY=new Oe,this.normalized=new Oe,this.normalizedFlippedY=new Oe,this.normalizedCentered=new Oe,this.normalizedCenteredFlippedY=new Oe,this._downed=!1,Je.set(this.domElement,this),this.onDown=new Re,this.onMove=new Re,this.onUp=new Re,this.onClick=new Re,this.onTypeChange=new Re,this._preventMouseTypeChange=!1,this._onPointerMoveBinded=this._onPointerMove.bind(this),this._onPointerDownBinded=this._onPointerDown.bind(this),this._onPointerUpBinded=this._onPointerUp.bind(this),this._updateBinded=this._update.bind(this),this._resizeBinded=this.resize.bind(this),this.resize(),this.enable()}resize(){this._domElementBoundingRect=this.domElement.getBoundingClientRect()}_onPointerDown(t){"touchstart"===t.type&&(this._preventMouseTypeChange=!0,this._changeType(Ze.TOUCH_TYPE)),this._downed=!0,this.dragOffset.set(0,0),this.copy(this._position),this._onPointerEvent(t),this._updatePositions(),this.onDown.dispatch(t)}_onPointerMove(t){if("mousemove"===t.type){if(this._preventMouseTypeChange)return;this._changeType(Ze.MOUSE_TYPE)}this._onPointerEvent(t),this.onMove.dispatch(t)}_onPointerUp(t){this._downed=!1,this._onPointerEvent(t),this._updatePositions(),this.onUp.dispatch(t),4>this.dragOffset.length&&this.onClick.dispatch(t),clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this._preventMouseTypeChange=!1},2e3)}_onPointerEvent(t){!!window.TouchEvent&&t instanceof window.TouchEvent&&("touchend"===t.type?t=t.changedTouches[0]:t=t.touches[0]),this._position.x=t.clientX-this._domElementBoundingRect.left,this._position.y=t.clientY-this._domElementBoundingRect.top}_changeType(e){this.type===e||(this.type=e,this.disable(),this.enable(),this.onTypeChange.dispatch(this.type))}_update(){(this.x||this.y)&&(this.velocity.x=this._position.x-this.x,this.velocity.y=this._position.y-this.y,this.downed&&this.dragOffset.add(this.velocity)),this._updatePositions()}_updatePositions(){this.x=this._position.x,this.y=this._position.y,this.centered.x=this.centeredFlippedY.x=this.x-.5*this._domElementBoundingRect.width,this.centered.y=this.centeredFlippedY.y=this.y-.5*this._domElementBoundingRect.height,this.centeredFlippedY.y*=-1,this.normalized.x=this.normalizedFlippedY.x=this.x/this._domElementBoundingRect.width,this.normalized.y=this.normalizedFlippedY.y=this.y/this._domElementBoundingRect.height,this.normalizedFlippedY.y=1-this.normalizedFlippedY.y,this.normalizedCentered.x=this.normalizedCenteredFlippedY.x=2*this.normalized.x-1,this.normalizedCentered.y=this.normalizedCenteredFlippedY.y=2*this.normalized.y-1,this.normalizedCenteredFlippedY.y*=-1}enable(){this.disable(),this.resize(),this.type===Ze.TOUCH_TYPE?(this.domElement.addEventListener("touchmove",this._onPointerMoveBinded),window.addEventListener("touchend",this._onPointerUpBinded)):(this.domElement.addEventListener("mousedown",this._onPointerDownBinded),window.addEventListener("mouseup",this._onPointerUpBinded)),this.domElement.addEventListener("touchstart",this._onPointerDownBinded),this.domElement.addEventListener("mousemove",this._onPointerMoveBinded),window.addEventListener("resize",this._resizeBinded),De.add(this._updateBinded=this._updateBinded||this._update.bind(this))}disable(){De.delete(this._updateBinded),this.domElement.removeEventListener("touchstart",this._onPointerDownBinded),this.domElement.removeEventListener("mousedown",this._onPointerDownBinded),this.domElement.removeEventListener("touchmove",this._onPointerMoveBinded),this.domElement.removeEventListener("mousemove",this._onPointerMoveBinded),window.removeEventListener("touchend",this._onPointerUpBinded),window.removeEventListener("mouseup",this._onPointerUpBinded),window.removeEventListener("resize",this._resizeBinded)}}const $e=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Ke=function(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=n*n+a*a+r*r+o*o;return 0<i&&(i=1/ve(i),e[0]=n*i,e[1]=a*i,e[2]=r*i,e[3]=o*i),e},et=function(){let e=L(),t=N(1,0,0),n=N(0,1,0);return function(r,o,a){let i=H(o,a);return-0.999999>i?(V(e,t,o),1e-6>A(e)&&V(e,n,o),Y(e,e),ce(r,e,Math.PI),r):0.999999<i?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(V(e,o,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+i,Ke(r,r))}}(),tt=function(){let e=le(),n=le();return function(r,o,a,i,l,d){return ge(e,o,l,d),ge(n,a,i,d),ge(r,e,n,2*d*(1-d)),r}}(),nt=function(){let e=Z();return function(t,n,a,r){return e[0]=a[0],e[3]=a[1],e[6]=a[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Ke(t,fe(t,e))}}();class at extends Float32Array{constructor(e=0,t=0,n=0,a=1){return super(4),this.set(e,t,n,a),this}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get z(){return this[2]}set z(e){this[2]=e}get w(){return this[3]}set w(e){this[3]=e}identity(){return se(this),this}set(e,t,n,a){return J(this,e,t,n,a),this}rotateX(e){return ue(this,this,e),this}rotateY(e){return me(this,this,e),this}rotateZ(e){return _e(this,this,e),this}invert(e=this){return he(this,e),this}copy(e){return $e(this,e),this}normalize(e=this){return Ke(this,this),this}multiply(e,t){return t?pe(this,e,t):pe(this,this,e),this}fromMatrix3(e){return fe(this,e),this}}class rt{constructor({matrix:e=new ze,domElement:t=document.body,distance:n=0,invertRotation:a=!0,rotationEaseRatio:r=.04,zoomSpeed:o=.1,zoomEaseRatio:i=.1,minDistance:d=0,maxDistance:l=Infinity,autoupdate:s=!0}={}){this.matrix=e,this.disabled=!1,this._distance=n,this.invertRotation=a,this.rotationEaseRatio=r,this.maxDistance=l,this.minDistance=d,this.zoomSpeed=o,this.zoomEaseRatio=i,this._pointer=Ze.get(t),this._nextDistance=this._distance,this._cachedQuaternion=new at,this._cachedMatrix=new ze,this._cachedVector3=new Ue,this._velocity=new Oe,this._velocityOrigin=new Oe,this._position=new Ue([this.matrix.x,this.matrix.y,this.matrix.z]),this._positionPrevious=this._position.clone(),this._positionOffset=new Ue,t.addEventListener("wheel",this.onWheel.bind(this)),this.update()}set distance(e){this._distance=this._nextDistance=e}get distance(){return this._distance}onWheel(t){this._nextDistance+=t.deltaY*this.zoomSpeed,this._nextDistance=xe(Ce(this._nextDistance,this.maxDistance),this.minDistance)}update(){this.disabled||(this._cachedMatrix.identity(),this._cachedQuaternion.identity(),this._distance+=(this._nextDistance-this._distance)*this.zoomEaseRatio,this._position.set(this.matrix.x,this.matrix.y,this.matrix.z).subtract(this._positionOffset),this.matrix.x=0,this.matrix.y=0,this.matrix.z=0,this._pointer.downed&&this._velocity.copy(this._pointer.velocity).scale(.003),this._velocity.lerp(this._velocityOrigin,this.rotationEaseRatio),this._cachedQuaternion.rotateY(this.invertRotation?-this._velocity.x:this._velocity.x),this._cachedQuaternion.rotateX(this.invertRotation?-this._velocity.y:this._velocity.y),this._cachedMatrix.fromQuaternion(this._cachedQuaternion),this.matrix.multiply(this._cachedMatrix),this._positionOffset.set(0,0,1),this._positionOffset.applyMatrix4(this.matrix),this._positionOffset.scale(this._distance),this._cachedVector3.copy(this._position).add(this._positionOffset),this.matrix.x=this._cachedVector3.x,this.matrix.y=this._cachedVector3.y,this.matrix.z=this._cachedVector3.z)}}class ot{constructor({canvas:e}={}){this.canvas=e,this.gl=this.canvas.getContext("webgl",{depth:!0,alpha:!1,antialias:!0}),this.camera=new Qe,this.cameraController=new rt({matrix:this.camera.transform,distance:5}),this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.DEPTH_TEST),this.program=new Ge({gl:this.gl,uniforms:[["transform",new ze]],vertexShaderChunks:[["start",`
          uniform mat4 projectionView;
          uniform mat4 transform;

          attribute vec3 normal;
          attribute vec3 position;

          varying vec3 vNormal;
        `],["end",`
          gl_Position = projectionView * transform * vec4(position, 1.);
          vNormal = normal;
        `]],fragmentShaderChunks:[["start",`
          precision highp float;
          varying vec3 vNormal;
        `],["end",`
          gl_FragColor = vec4(vNormal * .5 + .5, 1.);
        `]]}),this.mesh=new We({gl:this.gl,attributes:[["position",{data:new Float32Array([-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5]),size:3}],["normal",{data:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0]),size:3}]],indiceData:new Uint8Array([0,2,3,0,3,1,4,6,7,4,7,5,8,10,11,8,11,9,12,14,15,12,15,13,16,18,19,16,19,17,20,22,23,20,23,21])})}resize(e,t){this.camera.aspectRatio=e/t,this.update()}update(){this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.cameraController.update(),this.program.use(),this.program.uniforms.set("projectionView",this.camera.projectionViewMatrix),this.program.attributes.set(this.mesh.attributes),this.mesh.bind(),this.mesh.draw()}}let it=document.createElement("template");Le.load("src/main/template.html").then((e)=>{it.innerHTML=e}),Le.onLoad.then(()=>{window.customElements.define("dnit-main",class extends ke{connectedCallback(){super.connectedCallback();let e=document.importNode(it.content,!0);this.appendChild(e),this.canvas=this.querySelector("canvas"),this.view=new ot({canvas:this.canvas}),window.addEventListener("resize",this._resizeBinded=this.resize.bind(this)),this.resize()}disconnectedCallback(){window.removeEventListener("resize",this._resizeBinded)}resize(){let e=this.canvas.offsetWidth,t=this.canvas.offsetHeight;this.canvas.width=e*window.devicePixelRatio,this.canvas.height=t*window.devicePixelRatio,this.view.resize(e,t)}update(){this.view.update()}})})}}})})(function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=e():e()});